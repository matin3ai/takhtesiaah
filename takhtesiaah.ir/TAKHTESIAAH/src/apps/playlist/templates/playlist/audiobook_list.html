<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    {% csrf_token %} {% load static %} {% include 'playlist/components/head.html' %}
    <link rel="stylesheet" href="{% static 'playlist/css/list_style.css' %}" />
  </head>
  <body>
    <div class="container">
      {% include 'playlist/components/header.html' %}

      <main class="audio-list-container">
        <ul class="audio-list">
          {% for audiobook in audiobooks %}
          <li class="audio-item audio-anchor" id="audio-{{ forloop.counter }}">
            <div class="audio-card">
              {% if audiobook.cover_image %}
              <img
                src="{{ audiobook.cover_image.url }}"
                alt="{{ audiobook.title }}"
              />
              {% endif %}

              <div class="audio-info">
                <h3>{{ audiobook.title }}</h3>
                <p>{{ audiobook.description|truncatewords:20 }}</p>
                <audio controls controlsList="nodownload">
                  <source
                    src="{{ audiobook.audio_file.url }}"
                    type="audio/mpeg"
                  />
                  Ù…Ø±ÙˆØ±Ú¯Ø± Ø´Ù…Ø§ Ø§Ø² Ù¾Ø®Ø´ ÙØ§ÛŒÙ„ ØµÙˆØªÛŒ Ù¾Ø´ØªÛŒØ¨Ø§Ù†ÛŒ Ù†Ù…ÛŒâ€ŒÚ©Ù†Ø¯.
                </audio>
                <a href="{{ audiobook.get_absolute_url }}" class="details-link"
                  >Ø¬Ø²Ø¦ÛŒØ§Øª Ø¨ÛŒØ´ØªØ±</a
                >
              </div>
            </div>
          </li>
          {% empty %}
          <p>Ù‡ÛŒÚ† Ú©ØªØ§Ø¨ ØµÙˆØªÛŒ Ø¨Ø±Ø§ÛŒ Ù†Ù…Ø§ÛŒØ´ ÙˆØ¬ÙˆØ¯ Ù†Ø¯Ø§Ø±Ø¯.</p>
          {% endfor %}
        </ul>
      </main>
    </div>

    <!--LOADING-->
    <div id="loading-screen">
      <script
        src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
        type="module"
      ></script>
      <dotlottie-player
        src="https://lottie.host/03645a46-00c2-4cb4-9ece-a872eb19c700/dLr0gtabWt.lottie"
        background="transparent"
        speed="1"
        style="width: 200px; height: 200px"
        loop
        autoplay
      ></dotlottie-player>
    </div>

    
    {% include 'playlist/components/footer.html' %} {% csrf_token %}
<!--contact-->
<div id="contact-modal" class="modal">
  <div class="modal-content">
    <button class="close-btn" aria-label="Ø¨Ø³ØªÙ†">Ã—</button>
    <h3>ØªÙ…Ø§Ø³ Ø¨Ø§ Ù…Ø§</h3>
    
    <p><strong>ğŸ“ Ø´Ù…Ø§Ø±Ù‡ ØªÙ…Ø§Ø³:</strong></p>
    <p>
      <a href="tel:09132039701" class="call-btn">Û°Û¹Û±Û³Û²Û°Û³Û¹Û·Û°Û±</a>
    </p>
      <a href="mailto:info@takhtesiaah.ir">info@takhtesiaah.ir</a>
  </div>
</div>
    <!-- JSON-LD Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Book",
        "name": "Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ú©ØªØ§Ø¨ ØªØ®ØªÙ‡ Ø³ÛŒØ§Ù‡",
        "author": "Ø³Ø¹ÛŒØ¯Ù‡ Ø­Ø¨ÛŒØ¨ Ø§Ù„Ù‡ÛŒØ§Ù†",
        "description": "Ù…Ø¬Ù…ÙˆØ¹Ù‡ Ú©ØªØ§Ø¨â€ŒÙ‡Ø§ÛŒ Ø¢Ù…ÙˆØ²Ø´ÛŒ Ú©Ù„Ø§Ø³ Ø§ÙˆÙ„ Ø¯Ø¨Ø³ØªØ§Ù†",
        "publisher": {
          "@type": "Organization",
          "name": "ØªØ®ØªÙ‡ Ø³ÛŒØ§Ù‡"
        }
      }
    </script>
    <script src="{% static 'playlist/js/loading.js' %}"></script>
    <script src="{% static 'playlist/js/scripts.js' %}" defer></script>
    <link rel="stylesheet" href="{% static 'playlist/css/contact.css' %}">
    <script src="{% static 'playlist/js/contact.js' %}" defer></script>

    <script>
      // Smooth scroll to the target audiobook if specified in the URL
      document.addEventListener("DOMContentLoaded", () => {
        const params = new URLSearchParams(window.location.search);
        const targetId = params.get("scrollTo");
        if (targetId) {
          const el = document.getElementById(`audio-${targetId}`);
          if (el) {
            el.scrollIntoView({ behavior: "smooth" });
            el.style.border = "2px dashed #007bff";
          }
        }
      });
    </script>
  </body>
</html>
