<!DOCTYPE html>
<html lang="fa" dir="rtl">
  <head>
    {% csrf_token %} {% load static %} {% include 'playlist/components/head.html' %}
    <link rel="stylesheet" href="{% static 'playlist/css/list_style.css' %}" />
  </head>
  <body>
    <div class="container">
      {% include 'playlist/components/header.html' %}

      <main class="audio-list-container">
        <ul class="audio-list">
          {% for audiobook in audiobooks %}
          <li class="audio-item audio-anchor" id="audio-{{ forloop.counter }}">
            <div class="audio-card">
              {% if audiobook.cover_image %}
              <img
                src="{{ audiobook.cover_image.url }}"
                alt="{{ audiobook.title }}"
              />
              {% endif %}

              <div class="audio-info">
                <h3>{{ audiobook.title }}</h3>
                <p>{{ audiobook.description|truncatewords:20 }}</p>
                <audio controls controlsList="nodownload">
                  <source
                    src="{{ audiobook.audio_file.url }}"
                    type="audio/mpeg"
                  />
                  مرورگر شما از پخش فایل صوتی پشتیبانی نمی‌کند.
                </audio>
                <a href="{{ audiobook.get_absolute_url }}" class="details-link"
                  >جزئیات بیشتر</a
                >
              </div>
            </div>
          </li>
          {% empty %}
          <p>هیچ کتاب صوتی برای نمایش وجود ندارد.</p>
          {% endfor %}
        </ul>
      </main>
    </div>

    <!--LOADING-->
    <div id="loading-screen">
      <script
        src="https://unpkg.com/@dotlottie/player-component@2.7.12/dist/dotlottie-player.mjs"
        type="module"
      ></script>
      <dotlottie-player
        src="https://lottie.host/03645a46-00c2-4cb4-9ece-a872eb19c700/dLr0gtabWt.lottie"
        background="transparent"
        speed="1"
        style="width: 200px; height: 200px"
        loop
        autoplay
      ></dotlottie-player>
    </div>

    
    {% include 'playlist/components/footer.html' %} {% csrf_token %}
<!--contact-->
<div id="contact-modal" class="modal">
  <div class="modal-content">
    <button class="close-btn" aria-label="بستن">×</button>
    <h3>تماس با ما</h3>
    
    <p><strong>📞 شماره تماس:</strong></p>
    <p>
      <a href="tel:09132039701" class="call-btn">۰۹۱۳۲۰۳۹۷۰۱</a>
    </p>
      <a href="mailto:info@takhtesiaah.ir">info@takhtesiaah.ir</a>
  </div>
</div>
    <!-- JSON-LD Schema -->
    <script type="application/ld+json">
      {
        "@context": "https://schema.org",
        "@type": "Book",
        "name": "مجموعه کتاب تخته سیاه",
        "author": "سعیده حبیب الهیان",
        "description": "مجموعه کتاب‌های آموزشی کلاس اول دبستان",
        "publisher": {
          "@type": "Organization",
          "name": "تخته سیاه"
        }
      }
    </script>
    <script src="{% static 'playlist/js/loading.js' %}"></script>
    <script src="{% static 'playlist/js/scripts.js' %}" defer></script>
    <link rel="stylesheet" href="{% static 'playlist/css/contact.css' %}">
    <script src="{% static 'playlist/js/contact.js' %}" defer></script>

    <script>
      // Smooth scroll to the target audiobook if specified in the URL
      document.addEventListener("DOMContentLoaded", () => {
        const params = new URLSearchParams(window.location.search);
        const targetId = params.get("scrollTo");
        if (targetId) {
          const el = document.getElementById(`audio-${targetId}`);
          if (el) {
            el.scrollIntoView({ behavior: "smooth" });
            el.style.border = "2px dashed #007bff";
          }
        }
      });
    </script>
  </body>
</html>
